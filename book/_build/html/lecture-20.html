
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Lecture 20 - Large Language Models &#8212; My sample book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'lecture-20';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Lecture 19 - Transformers" href="lecture-19.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="My sample book - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="My sample book - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome to CHEM 5080: AI for Experimental Chemistry
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="lecture-01.html">Lecture 1 - Python Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-02.html">Lecture 2 - Pandas and Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-03.html">Lecture 3 - SMILES and RDKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-04.html">Lecture 4 - Chemical Structure Identifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-05.html">Lecture 5 - Regression and Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-06.html">Lecture 6 - Cross-Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-07.html">Lecture 7 - Decision Trees and Random Forests</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-08.html">Lecture 8 - Neural Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-09.html">Lecture 9 - Graph Neural Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-10.html">Lecture 10 - Property &amp; Reaction Prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-11.html">Lecture 11 - Dimension Reduction for Data Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-12.html">Lecture 12 - Self-Supervised Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-13.html">Lecture 13 - De Novo Molecule Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-14.html">Lecture 14 - Bayesian Optimization for Synthesis Conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-15.html">Lecture 15 - Multi-objective Bayesian Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-16.html">Lecture 16 - Reinforcement Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-17.html">Lecture 17 - PU Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-18.html">Lecture 18 - Contrastive Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture-19.html">Lecture 19 - Transformers</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Lecture 20 - Large Language Models</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Flecture-20.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/lecture-20.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lecture 20 - Large Language Models</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-goals">Learning goals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">0. Setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-available-models">1. Listing available models</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oneround-conversation">2. One‑round conversation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multiturn-conversation">3. Multi‑turn conversation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hallucinations">4. Hallucinations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glossary">5. Glossary</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lecture-20-large-language-models">
<h1>Lecture 20 - Large Language Models<a class="headerlink" href="#lecture-20-large-language-models" title="Link to this heading">#</a></h1>
<section id="learning-goals">
<h2>Learning goals<a class="headerlink" href="#learning-goals" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Use OpenAI’s <strong>Responses API</strong> to build you own chatbot.</p></li>
<li><p>Make a one-round conversation, then chain turns with history.</p></li>
<li><p>Compare models (GPT-5, GPT-4o, o-series) on the same prompt and log latency and tokens.</p></li>
<li><p>Understand <strong>hallucinations</strong> in LLMs and learn simple <strong>retrieval-augmented generation</strong>.</p></li>
</ul>
<p><a class="reference external" href="https://colab.research.google.com/drive/1miAN-emFKsUcH6rdULwp7rhJFbjR5fcF?usp=sharing"><img alt="Colab" src="https://img.shields.io/badge/Open-Colab-orange" /></a></p>
<p>For this lecture 20, it is recommended to run everything in Colab.</p>
</section>
<section id="setup">
<h2>0. Setup<a class="headerlink" href="#setup" title="Link to this heading">#</a></h2>
<p>Install packages if needed and place an API key placeholder.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Intentional stop: ending execution here.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">RuntimeError</span><span class="g g-Whitespace">                              </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Intentional stop: ending execution here.&quot;</span><span class="p">)</span>

<span class="ne">RuntimeError</span>: Intentional stop: ending execution here.
</pre></div>
</div>
</div>
</div>
</section>
<section id="listing-available-models">
<h2>1. Listing available models<a class="headerlink" href="#listing-available-models" title="Link to this heading">#</a></h2>
<p>The OpenAI API exposes many models. Use the <code class="docutils literal notranslate"><span class="pre">models.list()</span></code> method to see models available to your account. This call requires a valid API key.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># List available models (requires a valid API key)</span>
<span class="n">models</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="k">for</span> <span class="n">available_models</span> <span class="ow">in</span> <span class="n">models</span><span class="o">.</span><span class="n">data</span><span class="p">[:</span><span class="mi">50</span><span class="p">]:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">available_models</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>gpt-4-0613
gpt-4
gpt-3.5-turbo
gpt-5-search-api-2025-10-14
gpt-realtime-mini
gpt-realtime-mini-2025-10-06
sora-2
sora-2-pro
davinci-002
babbage-002
gpt-3.5-turbo-instruct
gpt-3.5-turbo-instruct-0914
dall-e-3
dall-e-2
gpt-4-1106-preview
gpt-3.5-turbo-1106
tts-1-hd
tts-1-1106
tts-1-hd-1106
text-embedding-3-small
text-embedding-3-large
gpt-4-0125-preview
gpt-4-turbo-preview
gpt-3.5-turbo-0125
gpt-4-turbo
gpt-4-turbo-2024-04-09
gpt-4o
gpt-4o-2024-05-13
gpt-4o-mini-2024-07-18
gpt-4o-mini
gpt-4o-2024-08-06
chatgpt-4o-latest
o1-mini-2024-09-12
o1-mini
gpt-4o-realtime-preview-2024-10-01
gpt-4o-audio-preview-2024-10-01
gpt-4o-audio-preview
gpt-4o-realtime-preview
omni-moderation-latest
omni-moderation-2024-09-26
gpt-4o-realtime-preview-2024-12-17
gpt-4o-audio-preview-2024-12-17
gpt-4o-mini-realtime-preview-2024-12-17
gpt-4o-mini-audio-preview-2024-12-17
o1-2024-12-17
o1
gpt-4o-mini-realtime-preview
gpt-4o-mini-audio-preview
computer-use-preview
o3-mini
</pre></div>
</div>
</div>
</div>
</section>
<section id="oneround-conversation">
<h2>2. One‑round conversation<a class="headerlink" href="#oneround-conversation" title="Link to this heading">#</a></h2>
<p>Let’s ask a simple chemistry question to GPT‑4o and its smaller variants using the <strong>Responses API</strong>.</p>
<p>We will calculate the number of moles of <strong>ethanol (C₂H₅OH)</strong> in 50 mL given a density of 0.789 g/mL. The request is supplied via the <code class="docutils literal notranslate"><span class="pre">input</span></code> parameter rather than <code class="docutils literal notranslate"><span class="pre">messages</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define the prompt for a one‑round question</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;Calculate the number of moles of ethanol in 50 mL. Just show your results in one sentence.&quot;</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
     <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span>
     <span class="nb">input</span><span class="o">=</span><span class="n">prompt</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The number of moles of ethanol in 50 mL is approximately 0.86 moles, assuming the density of ethanol is 0.789 g/mL and the molar mass is 46.07 g/mol.
</pre></div>
</div>
</div>
</div>
<p>For your reference below is the correct answer based on accurate calculation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Given data</span>
<span class="n">volume_ml</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">density_ethanol</span> <span class="o">=</span> <span class="mf">0.789</span>  <span class="c1"># g/mL</span>
<span class="n">molar_mass_ethanol</span> <span class="o">=</span> <span class="mf">46.07</span>  <span class="c1"># g/mol</span>

<span class="c1"># Calculate mass and moles</span>
<span class="n">mass_ethanol</span> <span class="o">=</span> <span class="n">density_ethanol</span> <span class="o">*</span> <span class="n">volume_ml</span>
<span class="n">moles_ethanol</span> <span class="o">=</span> <span class="n">mass_ethanol</span> <span class="o">/</span> <span class="n">molar_mass_ethanol</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The number of moles of ethanol in </span><span class="si">{</span><span class="n">volume_ml</span><span class="si">}</span><span class="s2"> mL is approximately </span><span class="si">{</span><span class="n">moles_ethanol</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> mol&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The number of moles of ethanol in 50 mL is approximately 0.856 mol
</pre></div>
</div>
</div>
</div>
<p>You can also ask questions like SMILES and IUPAC names in this way:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;What are the SMILES notation and IUPAC name of aspirin?&quot;</span>

<span class="n">response1</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
     <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span>
     <span class="nb">input</span><span class="o">=</span><span class="n">prompt</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response1</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The SMILES notation for aspirin is `CC(=O)OC1=CC=CC=C1C(=O)O`.

The IUPAC name for aspirin is 2-(acetyloxy)benzoic acid.
</pre></div>
</div>
</div>
</div>
<p>Now you can change the model to <code class="docutils literal notranslate"><span class="pre">gpt-4.1</span></code> and see it behaves slightly differently:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">response2</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
     <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4.1&quot;</span><span class="p">,</span>
     <span class="nb">input</span><span class="o">=</span><span class="n">prompt</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response2</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>**Aspirin** is a widely used medication, commonly known as acetylsalicylic acid.

### 1. **SMILES Notation**
```
CC(=O)Oc1ccccc1C(=O)O
```

### 2. **IUPAC Name**
**2-acetyloxybenzoic acid** (or fully: **2-(acetyloxy)benzoic acid**)

#### **Summary Table**

| Property             | Value                          |
|----------------------|--------------------------------|
| **SMILES**           | CC(=O)Oc1ccccc1C(=O)O          |
| **IUPAC Name**       | 2-acetyloxybenzoic acid        |

Let me know if you need the structure or any additional details!
</pre></div>
</div>
</div>
</div>
<p>Here is for <code class="docutils literal notranslate"><span class="pre">gpt-3.5</span></code> response:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">response3</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
     <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-3.5-turbo&quot;</span><span class="p">,</span>
     <span class="nb">input</span><span class="o">=</span><span class="n">prompt</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response3</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The SMILES notation for aspirin is O=C(C)Oc1ccccc1C(=O)O.

The IUPAC name for aspirin is 2-acetyloxybenzoic acid.
</pre></div>
</div>
</div>
</div>
<p>Now, we can consider a new paramter call <code class="docutils literal notranslate"><span class="pre">temperature</span></code>. The higher this value the more “creative” model will be. If <code class="docutils literal notranslate"><span class="pre">temperature</span></code> is <code class="docutils literal notranslate"><span class="pre">0</span></code>, the model will respond more similarly (but not always the same!).</p>
<p>Below you will see, even if the answer to asprin question will be the same, the model answers differently at <code class="docutils literal notranslate"><span class="pre">temperature</span> <span class="pre">=</span> <span class="pre">1</span></code> while gives the same answer in <code class="docutils literal notranslate"><span class="pre">temperature</span> <span class="pre">=</span> <span class="pre">0</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;What are the SMILES notation and IUPAC name of aspirin?&quot;</span>


<span class="c1"># Run three times with temperature = 1</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span>
        <span class="n">temperature</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="nb">input</span><span class="o">=</span><span class="n">prompt</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">--- Response </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> (temperature=1) ---&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="o">*</span><span class="mi">50</span><span class="p">)</span>
<span class="c1"># Run three times with temperature = 0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
    <span class="n">response3</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span>
        <span class="n">temperature</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="nb">input</span><span class="o">=</span><span class="n">prompt</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">--- Response </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> (temperature=0) ---&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">response3</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>--- Response 1 (temperature=1) ---
The SMILES notation for aspirin is `CC(=O)OC1=CC=CC=C1C(=O)O`.

The IUPAC name for aspirin is 2-acetyloxybenzoic acid.

--- Response 2 (temperature=1) ---
The SMILES notation for aspirin is: `CC(=O)OC1=CC=CC=C1C(=O)O`.

The IUPAC name for aspirin is: 2-acetyloxybenzoic acid.

--- Response 3 (temperature=1) ---
The SMILES notation for aspirin is `CC(=O)OC1=CC=CC=C1C(=O)O`.

The IUPAC name of aspirin is **2-acetoxybenzoic acid**.
**************************************************

--- Response 1 (temperature=0) ---
The SMILES notation for aspirin is `CC(=O)OC1=CC=CC=C1C(=O)O`.

The IUPAC name of aspirin is **2-acetyloxybenzoic acid**.

--- Response 2 (temperature=0) ---
The SMILES notation for aspirin is `CC(=O)OC1=CC=CC=C1C(=O)O`.

The IUPAC name of aspirin is **2-acetyloxybenzoic acid**.

--- Response 3 (temperature=0) ---
The SMILES notation for aspirin is `CC(=O)OC1=CC=CC=C1C(=O)O`.

The IUPAC name of aspirin is **2-acetyloxybenzoic acid**.
</pre></div>
</div>
</div>
</div>
<p>Another paramter <code class="docutils literal notranslate"><span class="pre">max_output_tokens</span></code> will control how long the answer will be.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;What are the SMILES notation and IUPAC name of aspirin?&quot;</span>

<span class="n">response4</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
     <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span>
     <span class="n">temperature</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
     <span class="n">max_output_tokens</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
     <span class="nb">input</span><span class="o">=</span><span class="n">prompt</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response4</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The SMILES notation for aspirin is `CC(=O)OC1=CC=CC=C
</pre></div>
</div>
</div>
</div>
<p>In above case it actually doesnt finish answering the entire question.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;What are the SMILES notation and IUPAC name of aspirin?&quot;</span>

<span class="n">response5</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
     <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span>
     <span class="n">temperature</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
     <span class="n">max_output_tokens</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>
     <span class="nb">input</span><span class="o">=</span><span class="n">prompt</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response5</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The SMILES notation for aspirin is `CC(=O)OC1=CC=CC=C1C(=O)O`.

The IUPAC name for aspirin is **2-acetyloxybenzoic acid**.
</pre></div>
</div>
</div>
</div>
<p>You can also control your prompt to guide the model answer the questions in designed format.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;Is `2-acetoxybenzoic acid` the IUPAC name for aspirin? Answer Y or N. No explaination needed.&quot;</span>

<span class="n">response6a</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
     <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span>
     <span class="n">temperature</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
     <span class="n">max_output_tokens</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>
     <span class="nb">input</span><span class="o">=</span><span class="n">prompt</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response6a</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Y
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;Is `3-acetoxybenzoic acid` the IUPAC name for aspirin? Answer Y or N. No explaination needed.&quot;</span>

<span class="n">response6b</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
     <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span>
     <span class="n">temperature</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
     <span class="n">max_output_tokens</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>
     <span class="nb">input</span><span class="o">=</span><span class="n">prompt</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response6b</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>N
</pre></div>
</div>
</div>
</div>
<p>However, for some harder questions, both human and AI need to “think” or do reasoning before answer directly. In more advanced models like <code class="docutils literal notranslate"><span class="pre">gpt-5</span></code>, we can do this with specifying <code class="docutils literal notranslate"><span class="pre">reasoning_effort</span></code> (<code class="docutils literal notranslate"><span class="pre">low</span></code>, <code class="docutils literal notranslate"><span class="pre">medium</span></code>, or <code class="docutils literal notranslate"><span class="pre">high</span></code>) to allow model to “think” for longer time before answering the question.</p>
<p>Note: <code class="docutils literal notranslate"><span class="pre">temperature</span></code> feature will be disabled when you choose to do reasoning.
The <code class="docutils literal notranslate"><span class="pre">verbosity</span></code> parameter controls the length of the response (<code class="docutils literal notranslate"><span class="pre">low</span></code>, <code class="docutils literal notranslate"><span class="pre">medium</span></code>, or <code class="docutils literal notranslate"><span class="pre">high</span></code>)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">If aspirin is synthesized using ^18O-labeled acetic anhydride, which atom in aspirin retains the ^18O label, and what are its labeled SMILES and IUPAC name?</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
     <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-5&quot;</span><span class="p">,</span>
      <span class="n">reasoning</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;effort&quot;</span><span class="p">:</span> <span class="s2">&quot;low&quot;</span> <span class="p">},</span>
      <span class="c1">#text={ &quot;verbosity&quot;: &quot;low&quot; },  #This is optional to specify verbosity</span>
     <span class="nb">input</span><span class="o">=</span><span class="n">prompt</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- The 18O label ends up as the carbonyl oxygen of the acetyl group in aspirin (the ester C=O of the acetyl moiety).
- Labeled SMILES: CC(=[18O])Oc1ccccc1C(=O)O
- IUPAC name: 2-(acetyloxy)benzoic acid, with the acetyl carbonyl oxygen labeled as oxygen-18 (i.e., 2-(acetyloxy)benzoic acid-18O at the acetyl C=O).
</pre></div>
</div>
</div>
</div>
<p>Finally, an additional thing you can include in <code class="docutils literal notranslate"><span class="pre">instructions</span></code> is the <strong>system prompt</strong>.</p>
<p>A system prompt is a <strong>global</strong> instruction gives GPT its role and rules, guiding tone and behavior for the whole chat.
While a user prompt you see above is what you type to ask a question or request a task.
The system sets context; the user drives each response.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;Is `2-acetoxybenzoic acid` the IUPAC name for aspirin?&quot;</span>


<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-5&quot;</span><span class="p">,</span>
    <span class="n">instructions</span><span class="o">=</span><span class="s2">&quot;You are a chemistry assistant. Always answer only with &#39;Y&#39; or &#39;N&#39; and give no explanation.&quot;</span><span class="p">,</span>
    <span class="nb">input</span><span class="o">=</span> <span class="n">prompt</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Y
</pre></div>
</div>
</div>
</div>
<p>As you see below, when there is a conflict, the system prompt will likely <strong>overide</strong> the user prompt.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;Is `2-acetoxybenzoic acid` the IUPAC name for aspirin?  Always answer only with &#39;Yes!&#39; or &#39;No!&#39; and give 10 words explanation. &quot;</span>


<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-5&quot;</span><span class="p">,</span>
    <span class="n">instructions</span><span class="o">=</span><span class="s2">&quot;You are a chemistry assistant. Always answer only with &#39;Y&#39; or &#39;N&#39; and give no explanation.&quot;</span><span class="p">,</span>
    <span class="nb">input</span><span class="o">=</span> <span class="n">prompt</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>N
</pre></div>
</div>
</div>
</div>
<p>Above <code class="docutils literal notranslate"><span class="pre">instructions</span></code> will work similarly as below using <code class="docutils literal notranslate"><span class="pre">role</span> <span class="pre">=</span> <span class="pre">system</span></code> and put the text in <code class="docutils literal notranslate"><span class="pre">content</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span>
    <span class="nb">input</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span>
            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Always answer only with &#39;Y&#39; or &#39;N&#39; and give no explanation.&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Is `2-acetoxybenzoic acid` the IUPAC name for aspirin?&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Y
</pre></div>
</div>
</div>
</div>
<p>So, why we want to learn using the API instead of just chatting on the website?</p>
<p>When you want to automate tasks or process data programmatically — for example, checking multiple sentences for the presence of an IUPAC name.
In the web chat, you’d have to paste and check them one by one, but with the API, you can run a for loop to evaluate all 10 automatically and collect the results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sentences</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Aspirin is also known as 2-acetoxybenzoic acid.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Water is essential for life.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;The compound N-(4-hydroxyphenyl)acetamide is commonly called paracetamol.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Carbon dioxide is a greenhouse gas.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;The IUPAC name for caffeine is 1,3,7-trimethylxanthine.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Sodium chloride is used in cooking.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Acetone is also called propan-2-one.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;This sentence talks about chemical bonding.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Ethanoic acid is another name for acetic acid.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Oxygen supports combustion.&quot;</span>
    <span class="c1"># you can image when we have 1000+ sentences like above.</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-5-nano&quot;</span><span class="p">,</span>
        <span class="n">instructions</span><span class="o">=</span><span class="s2">&quot;You are a chemistry assistant. Respond only with Y or N. No explaination needed.&quot;</span><span class="p">,</span>
        <span class="nb">input</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Does this sentence mention an IUPAC name? &#39;</span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s2">&quot;-&gt;&quot;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Aspirin is also known as 2-acetoxybenzoic acid. -&gt; Y
Water is essential for life. -&gt; N
The compound N-(4-hydroxyphenyl)acetamide is commonly called paracetamol. -&gt; Y
Carbon dioxide is a greenhouse gas. -&gt; Y
The IUPAC name for caffeine is 1,3,7-trimethylxanthine. -&gt; Y
Sodium chloride is used in cooking. -&gt; Y
Acetone is also called propan-2-one. -&gt; Y
This sentence talks about chemical bonding. -&gt; N
Ethanoic acid is another name for acetic acid. -&gt; Y
Oxygen supports combustion. -&gt; Y
</pre></div>
</div>
</div>
</div>
<p>Below is another example when you try to unify the name entities in your inventory of lab notebook, which will later make you calculation of MW easier:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sentences</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;zinc nitrate heptahydrate&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Zn(NO3)37H2O&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Zn(NO3)3 7H2O&quot;</span><span class="p">,</span>
    <span class="s2">&quot;copper(II) sulfate pentahydrate&quot;</span><span class="p">,</span>
    <span class="s2">&quot;CuSO45H2O&quot;</span><span class="p">,</span>
    <span class="s2">&quot;CuSO4.5H2O&quot;</span><span class="p">,</span>
    <span class="s2">&quot;magnesium chloride hexahydrate&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MgCl26H2O&quot;</span><span class="p">,</span>
    <span class="s2">&quot;nickel(II) sulfate hexahydrate&quot;</span><span class="p">,</span>
    <span class="s2">&quot;NiSO46H2O&quot;</span>
    <span class="c1"># imagine 1000+ like this</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span>
        <span class="n">instructions</span><span class="o">=</span><span class="s2">&quot;Convert each compound name or formula into its standardized chemical formula with dot notation (e.g., Zn(NO3)2·6H2O). Output formula only.&quot;</span><span class="p">,</span>
        <span class="nb">input</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Standardize this compound: </span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s2">&quot;-&gt;&quot;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>zinc nitrate heptahydrate -&gt; Zn(NO3)2·7H2O
Zn(NO3)37H2O -&gt; Zn(NO3)3·7H2O
Zn(NO3)3 7H2O -&gt; Zn(NO3)3·7H2O
copper(II) sulfate pentahydrate -&gt; CuSO4·5H2O
CuSO45H2O -&gt; CuSO4·5H2O
CuSO4.5H2O -&gt; CuSO4·5H2O
magnesium chloride hexahydrate -&gt; MgCl2·6H2O
MgCl26H2O -&gt; MgCl2·6H2O
nickel(II) sulfate hexahydrate -&gt; NiSO4·6H2O
NiSO46H2O -&gt; NiSO4·6H2O
</pre></div>
</div>
</div>
</div>
</section>
<section id="multiturn-conversation">
<h2>3. Multi‑turn conversation<a class="headerlink" href="#multiturn-conversation" title="Link to this heading">#</a></h2>
<p>To maintain context across turns with the Responses API, pass a list of items to the <code class="docutils literal notranslate"><span class="pre">input</span></code> parameter. Each item is a dictionary with a <code class="docutils literal notranslate"><span class="pre">role</span></code> (“system”, “developer”, “user”, or “assistant”) and <code class="docutils literal notranslate"><span class="pre">content</span></code>. The API stores conversation history by default; you can also manage history manually by appending previous outputs. Here we build a small dialogue about <strong>metal–organic frameworks (MOFs)</strong> and SMILES notation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Start the conversation history</span>
<span class="n">history</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a helpful chemistry tutor. Keep your answers short.&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;What is the most widely reported metal organic framework (MOF)?&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="c1"># First turn – ask about MOFs</span>
<span class="n">first_resp</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-5-mini&quot;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">history</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">first_resp</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Historically the prototypical and most widely reported MOF is MOF-5 (IRMOF‑1, Zn4O(BDC)3) — it’s the classic, highly cited early MOF.  
For practical/stability-focused work, ZIF‑8 (Zn(mIm)2) is also extremely widely reported and heavily used in applications.
</pre></div>
</div>
</div>
</div>
<p>Now, we basically add the latest <code class="docutils literal notranslate"><span class="pre">output_text</span></code> back to <code class="docutils literal notranslate"><span class="pre">history</span></code>, add follow-up questions, and use it as the <code class="docutils literal notranslate"><span class="pre">input</span></code> for next round, so model will “see” the previous conversation (including the answer from itself) to answer next around of conversation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">first_resp</span><span class="o">.</span><span class="n">output_text</span><span class="p">})</span>
<span class="n">history</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;role&#39;: &#39;system&#39;,
  &#39;content&#39;: &#39;You are a helpful chemistry tutor. Keep your answers short.&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;What is the most widely reported metal organic framework (MOF)?&#39;},
 {&#39;role&#39;: &#39;assistant&#39;,
  &#39;content&#39;: &#39;Historically the prototypical and most widely reported MOF is MOF-5 (IRMOF‑1, Zn4O(BDC)3) — it’s the classic, highly cited early MOF.  \nFor practical/stability-focused work, ZIF‑8 (Zn(mIm)2) is also extremely widely reported and heavily used in applications.&#39;}]
</pre></div>
</div>
</div>
</div>
<p>Below we add the follow up quetsions and sent to the model:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span>  <span class="s2">&quot;content&quot;</span><span class="p">:</span>  <span class="s2">&quot;I dont quite understand the MOFs you mentioned in your previous answer, explain in short.&quot;</span><span class="p">})</span>
<span class="n">history</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;role&#39;: &#39;system&#39;,
  &#39;content&#39;: &#39;You are a helpful chemistry tutor. Keep your answers short.&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;What is the most widely reported metal organic framework (MOF)?&#39;},
 {&#39;role&#39;: &#39;assistant&#39;,
  &#39;content&#39;: &#39;Historically the prototypical and most widely reported MOF is MOF-5 (IRMOF‑1, Zn4O(BDC)3) — it’s the classic, highly cited early MOF.  \nFor practical/stability-focused work, ZIF‑8 (Zn(mIm)2) is also extremely widely reported and heavily used in applications.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;,
  &#39;content&#39;: &#39;I dont quite understand the MOFs you mentioned in your previous answer, explain in short.&#39;}]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">second_resp</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-5-mini&quot;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">history</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">second_resp</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A MOF (metal–organic framework) is a crystalline network of metal nodes connected by organic linkers that makes porous materials with very high surface area.

MOF‑5 (IRMOF‑1, Zn4O(BDC)3)
- Composition: Zn4O clusters connected by BDC linkers (BDC = benzene‑1,4‑dicarboxylate, aka terephthalate).  
- Features: cubic porous framework, very high surface area, one of the first widely reported MOFs.  
- Drawback: not very water‑stable; mostly used as a model system.

ZIF‑8 (Zn(mIm)2)
- Composition: Zn2+ nodes bridged by 2‑methylimidazolate (mIm) linkers.  
- Features: zeolite‑like topology, excellent thermal/chemical stability (including moisture), flexible pores that can gate molecules.  
- Uses: gas separation, catalysis, membranes, and many applied studies.
</pre></div>
</div>
</div>
</div>
<p>Adding the previous assistant reply into the history tells the model what it already said. This simple technique lets you build multi‑round dialogues without losing context.</p>
<p>Alternatively, in the <code class="docutils literal notranslate"><span class="pre">responses</span></code> API you can also pass a previous <code class="docutils literal notranslate"><span class="pre">response.id</span></code> to manage conversation state:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-5-mini&quot;</span><span class="p">,</span>
    <span class="n">instructions</span><span class="o">=</span><span class="s2">&quot;You are a helpful chemistry tutor. Keep your answers short.&quot;</span><span class="p">,</span>
    <span class="nb">input</span><span class="o">=</span><span class="s2">&quot;What is the most widely reported metal organic framework (MOF)?&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Turn 1:&quot;</span><span class="p">,</span> <span class="n">first</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>

<span class="n">follow</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
  <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-5-mini&quot;</span><span class="p">,</span>
  <span class="n">previous_response_id</span><span class="o">=</span><span class="n">first</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="c1">#do this instead of append the history</span>
  <span class="nb">input</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I dont quite understand the MOFs you mentioned in your previous answer, explain in short.&quot;</span><span class="p">}],</span>
    <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Turn 2:&quot;</span><span class="p">,</span> <span class="n">follow</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Turn 1: Historically the most widely reported is MOF-5 (aka IRMOF-1, Zn4O(BDC)3) — the prototypical Yaghi MOF frequently used as a model system. (Other very widely reported MOFs include ZIF-8 and UiO-66.)
Turn 2: Here are short, plain explanations for each:

- MOF-5 (aka IRMOF-1)  
  - Composition/structure: Zn4O inorganic nodes linked by terephthalate (benzene-1,4-dicarboxylate, BDC) linkers to form a cubic porous network.  
  - Key points: prototype MOF, very high surface area and porosity, widely used as a model system.  
  - Limitation: sensitive to moisture.

- ZIF-8  
  - Composition/structure: a zeolitic imidazolate framework made from Zn2+ nodes connected by 2‑methylimidazolate linkers; structure resembles zeolites.  
  - Key points: excellent chemical and thermal stability, relatively small pore apertures that give size‑selective transport, often used in gas separation, membranes, and delivery.  

- UiO-66  
  - Composition/structure: built from robust Zr6 oxo/hydroxo clusters linked by BDC (terephthalate) linkers to form a highly connected 3D network.  
  - Key points: exceptional thermal/chemical stability (including water and acid), easy to functionalize and introduce defects, commonly used for catalysis, adsorption, and drug delivery.

If you want, I can show a simple diagram or compare them by stability, pore size, and typical applications.
</pre></div>
</div>
</div>
</div>
<p>Now, let’s consider, we can talk to agent to help us improve the reaction yield by asking it to improve the conditions iteratively. In this case the agent will be able to see previous reaction suggestion history and the respective reaction outcome. Note that LLM generally gives such “prediction” mostly by “educated guess” and their “chemical intutitions” obtained during the training. There is actually no calculation or math done in this suggesting condition steps. Still, it will show you how they can act like a human chemist to gradually improve the reaction condition.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1) Load dataset</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/zzhenglab/ai4chem/main/book/_data/mof_yield_dataset.csv&quot;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="c1"># 2) Choose target MOFLinker</span>
<span class="n">target</span> <span class="o">=</span> <span class="s2">&quot;O=C(O)c1cc(C(=O)O)cc(C(=O)O)c1&quot;</span>

<span class="c1"># 3) Subset and grids</span>
<span class="n">sub</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;smiles&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">target</span><span class="p">][[</span><span class="s2">&quot;temperature&quot;</span><span class="p">,</span> <span class="s2">&quot;time_h&quot;</span><span class="p">,</span> <span class="s2">&quot;yield&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">valid_temps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sub</span><span class="p">[</span><span class="s2">&quot;temperature&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="n">valid_times</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sub</span><span class="p">[</span><span class="s2">&quot;time_h&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">valid_temps</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">valid_times</span> <span class="p">)</span>
<span class="n">sub</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[ 25  40  55  70  85 100 115 130 155 160]
[ 12  24  36  48  60  72  84  96 108 120]
</pre></div>
</div>
<div class="output text_html">
  <div id="df-56bee168-1b26-495f-95f8-9fee2d54fc4f" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>temperature</th>
      <th>time_h</th>
      <th>yield</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3</th>
      <td>25</td>
      <td>12</td>
      <td>0.21</td>
    </tr>
    <tr>
      <th>13</th>
      <td>25</td>
      <td>12</td>
      <td>0.29</td>
    </tr>
    <tr>
      <th>23</th>
      <td>25</td>
      <td>12</td>
      <td>0.24</td>
    </tr>
    <tr>
      <th>33</th>
      <td>25</td>
      <td>12</td>
      <td>0.25</td>
    </tr>
    <tr>
      <th>43</th>
      <td>25</td>
      <td>12</td>
      <td>0.15</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>19953</th>
      <td>160</td>
      <td>120</td>
      <td>0.48</td>
    </tr>
    <tr>
      <th>19963</th>
      <td>160</td>
      <td>120</td>
      <td>0.17</td>
    </tr>
    <tr>
      <th>19973</th>
      <td>160</td>
      <td>120</td>
      <td>0.35</td>
    </tr>
    <tr>
      <th>19983</th>
      <td>160</td>
      <td>120</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>19993</th>
      <td>160</td>
      <td>120</td>
      <td>0.34</td>
    </tr>
  </tbody>
</table>
<p>2000 rows × 3 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-56bee168-1b26-495f-95f8-9fee2d54fc4f')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-56bee168-1b26-495f-95f8-9fee2d54fc4f button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-56bee168-1b26-495f-95f8-9fee2d54fc4f');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


    <div id="df-915df8a3-3d00-48c3-9911-b09a2fed2018">
      <button class="colab-df-quickchart" onclick="quickchart('df-915df8a3-3d00-48c3-9911-b09a2fed2018')"
                title="Suggest charts"
                style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
      </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

      <script>
        async function quickchart(key) {
          const quickchartButtonEl =
            document.querySelector('#' + key + ' button');
          quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
          quickchartButtonEl.classList.add('colab-df-spinner');
          try {
            const charts = await google.colab.kernel.invokeFunction(
                'suggestCharts', [key], {});
          } catch (error) {
            console.error('Error during call to suggestCharts:', error);
          }
          quickchartButtonEl.classList.remove('colab-df-spinner');
          quickchartButtonEl.classList.add('colab-df-quickchart-complete');
        }
        (() => {
          let quickchartButtonEl =
            document.querySelector('#df-915df8a3-3d00-48c3-9911-b09a2fed2018 button');
          quickchartButtonEl.style.display =
            google.colab.kernel.accessAllowed ? 'block' : 'none';
        })();
      </script>
    </div>

  <div id="id_2d9ee167-17e0-45ea-bcae-2da3483ce86f">
    <style>
      .colab-df-generate {
        background-color: #E8F0FE;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        fill: #1967D2;
        height: 32px;
        padding: 0 0 0 0;
        width: 32px;
      }

      .colab-df-generate:hover {
        background-color: #E2EBFA;
        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
        fill: #174EA6;
      }

      [theme=dark] .colab-df-generate {
        background-color: #3B4455;
        fill: #D2E3FC;
      }

      [theme=dark] .colab-df-generate:hover {
        background-color: #434B5C;
        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
        fill: #FFFFFF;
      }
    </style>
    <button class="colab-df-generate" onclick="generateWithVariable('sub')"
            title="Generate code using this dataframe."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z"/>
  </svg>
    </button>
    <script>
      (() => {
      const buttonEl =
        document.querySelector('#id_2d9ee167-17e0-45ea-bcae-2da3483ce86f button.colab-df-generate');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      buttonEl.onclick = () => {
        google.colab.notebook.generateWithVariable('sub');
      }
      })();
    </script>
  </div>

    </div>
  </div>
</div></div>
</div>
<p>Now we will guide LLM to propose one reaction condition for each conversation, then use the real data from this dataet to provide the result outcome as the follow-up conversation and ask it to suggest the next one.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 4) Utility functions</span>
<span class="k">def</span><span class="w"> </span><span class="nf">snap_to_grid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">grid</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">grid</span> <span class="o">-</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">argmin</span><span class="p">()])</span>

<span class="k">def</span><span class="w"> </span><span class="nf">score_yield</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="n">time_h</span><span class="p">):</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">sub</span><span class="p">[(</span><span class="n">sub</span><span class="p">[</span><span class="s2">&quot;temperature&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">temp</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">sub</span><span class="p">[</span><span class="s2">&quot;time_h&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">time_h</span><span class="p">)]</span>
    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">rows</span><span class="p">[</span><span class="s2">&quot;yield&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">rows</span><span class="o">.</span><span class="n">empty</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">parse_json_suggestion</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;temperature_C&quot;</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;time_h&quot;</span><span class="p">])</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">nums</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(\d+\.?\d*)&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="k">else</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="c1"># 5) Starting condition</span>
<span class="n">T0</span> <span class="o">=</span> <span class="mf">25.0</span>
<span class="n">H0</span> <span class="o">=</span> <span class="mf">12.0</span>
<span class="n">y0</span> <span class="o">=</span> <span class="n">score_yield</span><span class="p">(</span><span class="n">T0</span><span class="p">,</span> <span class="n">H0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Start -&gt; T: </span><span class="si">{</span><span class="n">T0</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> °C, t: </span><span class="si">{</span><span class="n">H0</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> h, yield: </span><span class="si">{</span><span class="n">y0</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 6) Build system &amp; first user message</span>
<span class="n">temp_grid_str</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">valid_temps</span><span class="p">))</span>
<span class="n">time_grid_str</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">valid_times</span><span class="p">))</span>

<span class="n">system_prompt</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;You are an experimental chemistry assistant optimizing MOF yield. &quot;</span>
    <span class="s2">&quot;Choose only from the allowed grids provided. &quot;</span>
    <span class="s2">&quot;Respond strictly in JSON with keys: temperature_C, time_h. &quot;</span>
    <span class="s2">&quot;No text outside JSON. Example: {</span><span class="se">\&quot;</span><span class="s2">temperature_C</span><span class="se">\&quot;</span><span class="s2">: 115, </span><span class="se">\&quot;</span><span class="s2">time_h</span><span class="se">\&quot;</span><span class="s2">: 72}&quot;</span>
<span class="p">)</span>

<span class="n">first_user</span> <span class="o">=</span> <span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;We are optimizing yield for SMILES: </span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">. &quot;</span>
    <span class="sa">f</span><span class="s2">&quot;Allowed temperature (°C) levels -&gt; [</span><span class="si">{</span><span class="n">temp_grid_str</span><span class="si">}</span><span class="s2">] &quot;</span>
    <span class="sa">f</span><span class="s2">&quot;Allowed time_h (hours) levels -&gt; [</span><span class="si">{</span><span class="n">time_grid_str</span><span class="si">}</span><span class="s2">] &quot;</span>
    <span class="sa">f</span><span class="s2">&quot;Here&#39;s a start: </span><span class="si">{</span><span class="n">T0</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> °C for </span><span class="si">{</span><span class="n">H0</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> h with yield </span><span class="si">{</span><span class="n">y0</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">. &quot;</span>
    <span class="s2">&quot;Suggest a new condition to improve yield.&quot;</span>
<span class="p">)</span>

<span class="c1"># 7) Initialize LLM and tracking</span>
<span class="n">history</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">system_prompt</span><span class="p">},</span>
           <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">first_user</span><span class="p">}]</span>

<span class="n">ROUNDS</span> <span class="o">=</span> <span class="mi">15</span>
<span class="n">gpt_best_T</span><span class="p">,</span> <span class="n">gpt_best_H</span><span class="p">,</span> <span class="n">gpt_best_y</span> <span class="o">=</span> <span class="n">T0</span><span class="p">,</span> <span class="n">H0</span><span class="p">,</span> <span class="n">y0</span>
<span class="n">gpt_best_over_time</span> <span class="o">=</span> <span class="p">[</span><span class="n">gpt_best_y</span><span class="p">]</span>

<span class="c1"># --- reproducible random baseline ---</span>
<span class="n">random_seed</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">rng</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">Random</span><span class="p">(</span><span class="n">random_seed</span><span class="p">)</span>
<span class="n">base_best_T</span><span class="p">,</span> <span class="n">base_best_H</span><span class="p">,</span> <span class="n">base_best_y</span> <span class="o">=</span> <span class="n">T0</span><span class="p">,</span> <span class="n">H0</span><span class="p">,</span> <span class="n">y0</span>
<span class="n">baseline_best_over_time</span> <span class="o">=</span> <span class="p">[</span><span class="n">base_best_y</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">ROUNDS</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">--- Round </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> ---&quot;</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">history</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">suggestion</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">output_text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model raw:&quot;</span><span class="p">,</span> <span class="n">suggestion</span><span class="p">)</span>

    <span class="c1"># Parse and evaluate</span>
    <span class="n">T_sug</span><span class="p">,</span> <span class="n">H_sug</span> <span class="o">=</span> <span class="n">parse_json_suggestion</span><span class="p">(</span><span class="n">suggestion</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">T_sug</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">T_sug</span><span class="p">,</span> <span class="n">H_sug</span> <span class="o">=</span> <span class="n">T0</span><span class="p">,</span> <span class="n">H0</span>
    <span class="n">Tq</span> <span class="o">=</span> <span class="n">snap_to_grid</span><span class="p">(</span><span class="n">T_sug</span><span class="p">,</span> <span class="n">valid_temps</span><span class="p">)</span>
    <span class="n">Hq</span> <span class="o">=</span> <span class="n">snap_to_grid</span><span class="p">(</span><span class="n">H_sug</span><span class="p">,</span> <span class="n">valid_times</span><span class="p">)</span>

    <span class="n">y</span> <span class="o">=</span> <span class="n">score_yield</span><span class="p">(</span><span class="n">Tq</span><span class="p">,</span> <span class="n">Hq</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;LLM eval -&gt; grid </span><span class="si">{</span><span class="n">Tq</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> °C, </span><span class="si">{</span><span class="n">Hq</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> h, yield </span><span class="si">{</span><span class="n">y</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="n">gpt_best_y</span><span class="p">:</span>
        <span class="n">gpt_best_T</span><span class="p">,</span> <span class="n">gpt_best_H</span><span class="p">,</span> <span class="n">gpt_best_y</span> <span class="o">=</span> <span class="n">Tq</span><span class="p">,</span> <span class="n">Hq</span><span class="p">,</span> <span class="n">y</span>
    <span class="n">gpt_best_over_time</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gpt_best_y</span><span class="p">)</span>

    <span class="n">feedback</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Observed yield </span><span class="si">{</span><span class="n">y</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">Tq</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> °C, </span><span class="si">{</span><span class="n">Hq</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> h. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Best so far </span><span class="si">{</span><span class="n">gpt_best_y</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">gpt_best_T</span><span class="p">)</span><span class="si">}</span><span class="s2"> °C, </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">gpt_best_H</span><span class="p">)</span><span class="si">}</span><span class="s2"> h. &quot;</span>
                <span class="s2">&quot;Suggest another JSON condition from the allowed grids to improve yield.&quot;</span><span class="p">)</span>
    <span class="n">history</span> <span class="o">+=</span> <span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">suggestion</span><span class="p">},</span>
                <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">feedback</span><span class="p">}]</span>

    <span class="c1"># Random baseline: reproducible random draws</span>
    <span class="n">Tr</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">valid_temps</span><span class="p">))</span>
    <span class="n">Hr</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">valid_times</span><span class="p">))</span>
    <span class="n">yr</span> <span class="o">=</span> <span class="n">score_yield</span><span class="p">(</span><span class="n">Tr</span><span class="p">,</span> <span class="n">Hr</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Baseline eval -&gt; grid </span><span class="si">{</span><span class="n">Tr</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> °C, </span><span class="si">{</span><span class="n">Hr</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> h, yield </span><span class="si">{</span><span class="n">yr</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">yr</span> <span class="o">&gt;</span> <span class="n">base_best_y</span><span class="p">:</span>
        <span class="n">base_best_T</span><span class="p">,</span> <span class="n">base_best_H</span><span class="p">,</span> <span class="n">base_best_y</span> <span class="o">=</span> <span class="n">Tr</span><span class="p">,</span> <span class="n">Hr</span><span class="p">,</span> <span class="n">yr</span>
    <span class="n">baseline_best_over_time</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base_best_y</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Final best by LLM:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;T: </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">gpt_best_T</span><span class="p">)</span><span class="si">}</span><span class="s2"> °C, t: </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">gpt_best_H</span><span class="p">)</span><span class="si">}</span><span class="s2"> h, yield: </span><span class="si">{</span><span class="n">gpt_best_y</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Final best baseline:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;T: </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">base_best_T</span><span class="p">)</span><span class="si">}</span><span class="s2"> °C, t: </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">base_best_H</span><span class="p">)</span><span class="si">}</span><span class="s2"> h, yield: </span><span class="si">{</span><span class="n">base_best_y</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Start -&gt; T: 25 °C, t: 12 h, yield: 0.44

--- Round 1 ---
Model raw: {&quot;temperature_C&quot;: 55, &quot;time_h&quot;: 48}
LLM eval -&gt; grid 55 °C, 48 h, yield 0.54
Baseline eval -&gt; grid 40 °C, 12 h, yield 0.50

--- Round 2 ---
Model raw: {&quot;temperature_C&quot;: 70, &quot;time_h&quot;: 72}
LLM eval -&gt; grid 70 °C, 72 h, yield 0.61
Baseline eval -&gt; grid 85 °C, 48 h, yield 0.64

--- Round 3 ---
Model raw: {&quot;temperature_C&quot;: 85, &quot;time_h&quot;: 96}
LLM eval -&gt; grid 85 °C, 96 h, yield 0.61
Baseline eval -&gt; grid 70 °C, 36 h, yield 0.53

--- Round 4 ---
Model raw: {&quot;temperature_C&quot;: 100, &quot;time_h&quot;: 72}
LLM eval -&gt; grid 100 °C, 72 h, yield 0.81
Baseline eval -&gt; grid 40 °C, 108 h, yield 0.43

--- Round 5 ---
Model raw: {&quot;temperature_C&quot;: 115, &quot;time_h&quot;: 72}
LLM eval -&gt; grid 115 °C, 72 h, yield 0.85
Baseline eval -&gt; grid 40 °C, 120 h, yield 0.51

--- Round 6 ---
Model raw: {&quot;temperature_C&quot;: 130, &quot;time_h&quot;: 72}
LLM eval -&gt; grid 130 °C, 72 h, yield 0.74
Baseline eval -&gt; grid 115 °C, 12 h, yield 0.63

--- Round 7 ---
Model raw: {&quot;temperature_C&quot;: 115, &quot;time_h&quot;: 84}
LLM eval -&gt; grid 115 °C, 84 h, yield 0.82
Baseline eval -&gt; grid 25 °C, 24 h, yield 0.46

--- Round 8 ---
Model raw: {&quot;temperature_C&quot;: 115, &quot;time_h&quot;: 60}
LLM eval -&gt; grid 115 °C, 60 h, yield 0.83
Baseline eval -&gt; grid 70 °C, 48 h, yield 0.59

--- Round 9 ---
Model raw: {&quot;temperature_C&quot;: 100, &quot;time_h&quot;: 60}
LLM eval -&gt; grid 100 °C, 60 h, yield 0.77
Baseline eval -&gt; grid 155 °C, 120 h, yield 0.46

--- Round 10 ---
Model raw: {&quot;temperature_C&quot;: 115, &quot;time_h&quot;: 96}
LLM eval -&gt; grid 115 °C, 96 h, yield 0.76
Baseline eval -&gt; grid 25 °C, 108 h, yield 0.48

--- Round 11 ---
Model raw: {&quot;temperature_C&quot;: 100, &quot;time_h&quot;: 84}
LLM eval -&gt; grid 100 °C, 84 h, yield 0.82
Baseline eval -&gt; grid 70 °C, 108 h, yield 0.50

--- Round 12 ---
Model raw: {&quot;temperature_C&quot;: 130, &quot;time_h&quot;: 60}
LLM eval -&gt; grid 130 °C, 60 h, yield 0.80
Baseline eval -&gt; grid 115 °C, 48 h, yield 0.76

--- Round 13 ---
Model raw: {&quot;temperature_C&quot;: 85, &quot;time_h&quot;: 72}
LLM eval -&gt; grid 85 °C, 72 h, yield 0.67
Baseline eval -&gt; grid 130 °C, 120 h, yield 0.60

--- Round 14 ---
Model raw: {&quot;temperature_C&quot;: 115, &quot;time_h&quot;: 48}
LLM eval -&gt; grid 115 °C, 48 h, yield 0.76
Baseline eval -&gt; grid 85 °C, 12 h, yield 0.52

--- Round 15 ---
Model raw: {&quot;temperature_C&quot;: 100, &quot;time_h&quot;: 96}
LLM eval -&gt; grid 100 °C, 96 h, yield 0.75
Baseline eval -&gt; grid 55 °C, 84 h, yield 0.65

Final best by LLM:
T: 115 °C, t: 72 h, yield: 0.85
Final best baseline:
T: 115 °C, t: 48 h, yield: 0.76
</pre></div>
</div>
</div>
</div>
<p>The plot below compares the LLM’s performance with random guessing. You can see that the LLM <strong>improves over successive rounds</strong>, using the conversation history to suggest increasingly better conditions.</p>
<p>In this example, the model wasn’t given much background information—so its behavior resembles that of a chemist starting from limited context. While the absolute performance isn’t optimal, it clearly demonstrates how an LLM can be integrated into an <strong>active learning</strong> workflow to iteratively guide experimental optimization.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 8) Plot best-over-time for LLM vs random baseline</span>
<span class="n">iters</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ROUNDS</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">iters</span><span class="p">,</span> <span class="n">gpt_best_over_time</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;LLM best-so-far&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">iters</span><span class="p">,</span> <span class="n">baseline_best_over_time</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Random baseline best-so-far&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Iteration&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Best yield&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Best yield over iterations: LLM vs random baseline&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/7e8a979be14ff840231ea5631e92c49c2a365f0a5ebc624380a7bcbf7e109e81.png" src="_images/7e8a979be14ff840231ea5631e92c49c2a365f0a5ebc624380a7bcbf7e109e81.png" />
</div>
</div>
<p>Below is the history record of this entire conversational reaction improvement process.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">history</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;role&#39;: &#39;system&#39;,
  &#39;content&#39;: &#39;You are an experimental chemistry assistant optimizing MOF yield. Choose only from the allowed grids provided. Respond strictly in JSON with keys: temperature_C, time_h. No text outside JSON. Example: {&quot;temperature_C&quot;: 115, &quot;time_h&quot;: 72}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &quot;We are optimizing yield for SMILES: O=C(O)c1cc(C(=O)O)cc(C(=O)O)c1. Allowed temperature (°C) levels -&gt; [25, 40, 55, 70, 85, 100, 115, 130, 155, 160] Allowed time_h (hours) levels -&gt; [12, 24, 36, 48, 60, 72, 84, 96, 108, 120] Here&#39;s a start: 25 °C for 12 h with yield 0.44. Suggest a new condition to improve yield.&quot;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 55, &quot;time_h&quot;: 48}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.54 at 55 °C, 48 h. Best so far 0.54 at 55 °C, 48 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 70, &quot;time_h&quot;: 72}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.61 at 70 °C, 72 h. Best so far 0.61 at 70 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 85, &quot;time_h&quot;: 96}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.61 at 85 °C, 96 h. Best so far 0.61 at 70 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 100, &quot;time_h&quot;: 72}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.81 at 100 °C, 72 h. Best so far 0.81 at 100 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 115, &quot;time_h&quot;: 72}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.85 at 115 °C, 72 h. Best so far 0.85 at 115 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 130, &quot;time_h&quot;: 72}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.74 at 130 °C, 72 h. Best so far 0.85 at 115 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 115, &quot;time_h&quot;: 84}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.82 at 115 °C, 84 h. Best so far 0.85 at 115 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 115, &quot;time_h&quot;: 60}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.83 at 115 °C, 60 h. Best so far 0.85 at 115 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 100, &quot;time_h&quot;: 60}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.77 at 100 °C, 60 h. Best so far 0.85 at 115 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 115, &quot;time_h&quot;: 96}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.76 at 115 °C, 96 h. Best so far 0.85 at 115 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 100, &quot;time_h&quot;: 84}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.82 at 100 °C, 84 h. Best so far 0.85 at 115 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 130, &quot;time_h&quot;: 60}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.80 at 130 °C, 60 h. Best so far 0.85 at 115 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 85, &quot;time_h&quot;: 72}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.67 at 85 °C, 72 h. Best so far 0.85 at 115 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 115, &quot;time_h&quot;: 48}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.76 at 115 °C, 48 h. Best so far 0.85 at 115 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;},
 {&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &#39;{&quot;temperature_C&quot;: 100, &quot;time_h&quot;: 96}&#39;},
 {&#39;role&#39;: &#39;user&#39;,
  &#39;content&#39;: &#39;Observed yield 0.75 at 100 °C, 96 h. Best so far 0.85 at 115 °C, 72 h. Suggest another JSON condition from the allowed grids to improve yield.&#39;}]
</pre></div>
</div>
</div>
</div>
</section>
<section id="hallucinations">
<h2>4. Hallucinations<a class="headerlink" href="#hallucinations" title="Link to this heading">#</a></h2>
<p><strong>Hallucination</strong> is defined as a plausible but false statement generated by a model. They arise because training procedures reward confident answers even when data are sparse. GPT‑5 reduces hallucinations but they still occur, especially when asked about nonexistent compounds.</p>
<p>Here we ask about a MOF called <em>MOF‑521</em> and its crystal structure.</p>
<p>Note that this aluminum MOF <strong>does exist</strong> ( <a class="reference external" href="https://onlinelibrary.wiley.com/doi/full/10.1002/anie.202311983">link </a>). However, it was reported on Oct. 2023 and after the checkpoint for earlier models like <code class="docutils literal notranslate"><span class="pre">gpt-3.5</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define a hallucination‑inducing prompt</span>
<span class="n">hallucination_prompt</span> <span class="o">=</span> <span class="s2">&quot;Describe the metal and organic linker used in synthesis of the MOF-521 in 20 words.&quot;</span>

<span class="n">response_h1</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-3.5-turbo&quot;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">hallucination_prompt</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response_h1</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MOF-521 uses Zr4+ ions as metal linker and 2,6-naphthalene dicarboxylate as organic linker in a three-dimensional crystalline structure.
</pre></div>
</div>
</div>
</div>
<p>As you see, the model does not answer with Al (aluminium) before this MOF is not on the training set. The name <code class="docutils literal notranslate"><span class="pre">MOF-521</span></code> itself sounds similar to other more common MOFs like <code class="docutils literal notranslate"><span class="pre">MOF-5</span></code>, <code class="docutils literal notranslate"><span class="pre">MOF-125</span></code> or <code class="docutils literal notranslate"><span class="pre">521-MOF</span></code>, therefore the model starts to halluciate.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">response_h2</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4.1&quot;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">hallucination_prompt</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response_h2</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MOF-521 uses zirconium (Zr) metal clusters and tetratopic tetrakis(4-carboxyphenyl)methane (TCPM) as the organic linker.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">response_h3</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">hallucination_prompt</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response_h3</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MOF-521 uses zirconium metal ions and a 4,4&#39;,4&#39;&#39;-s-Triazine-2,4,6-triyl-tribenzoic acid (TATB) as the organic linker.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">response_h4</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-5&quot;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">hallucination_prompt</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response_h4</span><span class="o">.</span><span class="n">output_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MOF-521 employs Zr6-oxo/hydroxo cluster metal nodes coordinated to tetrakis(4-carboxyphenyl)porphyrin (H4TCPP) linkers, forming a robust porphyrinic zirconium framework.
</pre></div>
</div>
</div>
</div>
<p>Below is answer example where model starts to “guess” the answer when asked the MW of an organic linker.</p>
<p>The correct answer is 330.24 g/mol (<a class="reference external" href="https://pubchem.ncbi.nlm.nih.gov/compound/15840397">link</a>). You will see except gpt-5, all guessing are wrong, while gpt-5 use the reasoning to improve the performance (so it takes longer to answer).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_response_time</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">instruction</span><span class="p">,</span> <span class="n">models</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">m</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span> <span class="n">instructions</span><span class="o">=</span><span class="n">instruction</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">output_text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">  ⏱ </span><span class="si">{</span><span class="n">t</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>

<span class="n">models</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;gpt-3.5-turbo&quot;</span><span class="p">,</span> <span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span> <span class="s2">&quot;gpt-4.1&quot;</span><span class="p">,</span> <span class="s2">&quot;gpt-5-mini&quot;</span><span class="p">,</span> <span class="s2">&quot;gpt-5&quot;</span><span class="p">]</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;What is the molecular weight of biphenyl-3,3&#39;,5,5&#39;-tetracarboxylic acid?&quot;</span>
<span class="n">instruction</span> <span class="o">=</span> <span class="s2">&quot;Answer in 5 words.&quot;</span>


<span class="n">test_response_time</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">instruction</span><span class="p">,</span> <span class="n">models</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>gpt-3.5-turbo: 620.17 g/mol  ⏱ 0.66s
gpt-4o: 322.20 g/mol  ⏱ 0.60s
gpt-4.1: 366.28 grams per mole.  ⏱ 1.36s
gpt-5-mini: Approximately 330.25 grams per mole  ⏱ 19.14s
gpt-5: Molar mass is 330.24 g/mol.  ⏱ 15.75s
</pre></div>
</div>
</div>
</div>
<p>The examples above show that a model can sometimes fabricate an answer — this is known as a hallucination. While it’s impossible to eliminate hallucinations entirely, several approaches can help reduce them. These include prompt engineering, retrieval-augmented generation (RAG), chain-of-thought reasoning, fine-tuning, and function calling. Other effective methods include grounding outputs with verified databases, enforcing structured response formats (like JSON schemas), post-processing with fact-checking tools, and using model ensembles or human-in-the-loop review.</p>
<p>For now, remember that whenever you use an LLM, it may still produce convincing but incorrect information.</p>
<p>Below, we’ll demonstrate a simple example of a basic RAG setup to help illustrate this concept.</p>
<p><img alt="image.png" src="data:image/png;base64,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" /></p>
<p>Image Credit (Chaoyu Yang) and Further Reading: <a class="reference external" href="https://www.bentoml.com/blog/building-rag-with-open-source-and-custom-ai-models">link</a></p>
<p>So what is <strong>retrieval‑augmented generation (RAG)</strong>?</p>
<p>An effective way to reduce hallucinations is to <strong>ground</strong> the model’s responses in external knowledge. In a simple retrieval‑augmented generation (RAG) pipeline, a search component retrieves relevant documents which are fed to the model. Naive RAG performs a single retrieval step and passes the results directly to the model.</p>
<p>Below is a minimal example of how you might implement a naive retrieval step using text embedding and cosine similarity. We create a small document collection of chemistry snippets and then retrieve the most similar document for a query.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ---------------------------</span>
<span class="c1"># 1) Data: 10 chunks (20–100 words each)</span>
<span class="c1">#    One chunk contains PubChem info with molecular weight 330.24 g/mol, CID 15840397.</span>
<span class="c1"># ---------------------------</span>
<span class="n">chunks</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;wiki-1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;https://en.wikipedia.org/wiki/Biphenyl&quot;</span><span class="p">,</span>
        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;Biphenyl is an aromatic hydrocarbon composed of two connected benzene rings. &quot;</span>
            <span class="s2">&quot;Many substituted biphenyls are used in materials and coordination chemistry. &quot;</span>
            <span class="s2">&quot;Unsubstituted biphenyl has formula C12H10. Substituted variants may carry carboxylate groups &quot;</span>
            <span class="s2">&quot;that change physical properties and reactivity. Safety data and handling vary by substitution pattern.&quot;</span>
        <span class="p">),</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;wiki-2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;https://en.wikipedia.org/wiki/Carboxylic_acid&quot;</span><span class="p">,</span>
        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;Carboxylic acids contain the functional group COOH. Multicarboxylic acids have multiple such groups &quot;</span>
            <span class="s2">&quot;that affect acidity, solubility, and reactivity. Their salts and esters are common in synthesis &quot;</span>
            <span class="s2">&quot;and polymer formation. Molecular weights depend on substitution and ring systems.&quot;</span>
        <span class="p">),</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;inventory-1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;local database: inventory 2024-11&quot;</span><span class="p">,</span>
        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;Stock item: NaOH. Bottle states batch number and supplier. &quot;</span>
            <span class="s2">&quot;Record contains storage conditions: cool and dry, desiccated. No explicit molecular weight field, only supplier code. &quot;</span>
        <span class="p">),</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;inventory-2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;local database: synthesis notes 2024-10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;Trial syntheses with a tetracarboxylic biphenyl linker and zinc nitrate gave variable crystallinity. &quot;</span>
            <span class="s2">&quot;Yields depended on solvent ratio and temperature program. &quot;</span>
            <span class="s2">&quot;No reliable molecular weight entry was recorded in these notes.&quot;</span>
        <span class="p">),</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;review-chem-1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;https://pubs.acs.org/doi/10.1021/acsomega.7b01964&quot;</span><span class="p">,</span>
        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;Multidentate flexible linkers, for example, di, tri, and tetra carboxylates, are the most widely used linkers in MOF chemistry. &quot;</span>
            <span class="s2">&quot;Such linkers coordinate with metal ions to form a wide range of multinuclear nodes with predictable geometries such as binuclear paddle-wheel units, tri, or tetranuclear units.&quot;</span>
             <span class="s2">&quot;In this regard, aromatic tetracarboxylate linkers are particularly utilitarian because of the more number of coordinating sites as well as the rich π-electron density. &quot;</span>
             <span class="s2">&quot;MOFs constructed from such π-electron-rich tetracarboxylate ligands have pore surfaces studded with a large number of oxygen atoms providing better interactions with gas molecules&quot;</span>

        <span class="p">),</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;pubchem-15840397&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;https://pubchem.ncbi.nlm.nih.gov/compound/15840397&quot;</span><span class="p">,</span>
        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;PubChem record for Biphenyl-3,3&#39;,5,5&#39;-tetracarboxylic Acid. Synonyms: BPTC acid, Biphenyl-3,3′,5,5′-tetracarboxylic acid. &quot;</span>
            <span class="s2">&quot;CID: 15840397. Molecular formula: C16H10O8. Molecular weight: 330.24 g/mol. Depositor provided identifiers, &quot;</span>
            <span class="s2">&quot;SMILES and InChI are available on the page. Data source: PubChem Compound 15840397.&quot;</span>
        <span class="p">),</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;supplier-cat-1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;https://www.ambeed.com/metal-organic-frameworks-(mof)-linkers.html&quot;</span><span class="p">,</span>
        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="s2">&quot;While long ligands increase pore size, they often reduce structural stability; conversely, short and rigid ligands promote higher crystallinity. &quot;</span>
                <span class="s2">&quot;Ligand functional groups not only form coordination bonds but also allow post-synthetic modification (PSM) to introduce specific recognition sites &quot;</span>
                <span class="s2">&quot;(e.g., Lewis acid/base sites, hydrogen-bond donors/acceptors), optimizing performance in gas adsorption, catalysis, or sensing.&quot;</span>
        <span class="p">),</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;wiki-3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;https://en.wikipedia.org/wiki/Molar_mass&quot;</span><span class="p">,</span>
        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;Molar mass is the mass of a given substance divided by the amount of substance. &quot;</span>
            <span class="s2">&quot;Units are g/mol. For organic compounds, it is calculated from atomic weights of constituent elements. &quot;</span>
            <span class="s2">&quot;Databases such as PubChem and supplier catalogs often list molar mass directly.&quot;</span>
        <span class="p">),</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;inventory-3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;local database: receiving log 2025-01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;Received: formic acid, sealed container. Checked against purchase order and stored in cabinet A. &quot;</span>
        <span class="p">),</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;methods-1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;https://zhenglab.wustl.edu/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;When checking molecular weight, verify against a reliable chemical database or a certificate of analysis. &quot;</span>
            <span class="s2">&quot;Cross-check names and synonyms to avoid confusion with isomers or salts. Confirm that the entry refers to the free acid.&quot;</span>
        <span class="p">),</span>
    <span class="p">},</span>
<span class="p">]</span>

<span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;What is the molecular weight of biphenyl-3,3&#39;,5,5&#39;-tetracarboxylic acid?&quot;</span>


<span class="n">emb_inputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">query</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">c</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Below is how they look like before turning into vectors:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">emb_inputs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&quot;What is the molecular weight of biphenyl-3,3&#39;,5,5&#39;-tetracarboxylic acid?&quot;,
 &#39;Biphenyl is an aromatic hydrocarbon composed of two connected benzene rings. Many substituted biphenyls are used in materials and coordination chemistry. Unsubstituted biphenyl has formula C12H10. Substituted variants may carry carboxylate groups that change physical properties and reactivity. Safety data and handling vary by substitution pattern.&#39;,
 &#39;Carboxylic acids contain the functional group COOH. Multicarboxylic acids have multiple such groups that affect acidity, solubility, and reactivity. Their salts and esters are common in synthesis and polymer formation. Molecular weights depend on substitution and ring systems.&#39;,
 &#39;Stock item: NaOH. Bottle states batch number and supplier. Record contains storage conditions: cool and dry, desiccated. No explicit molecular weight field, only supplier code. &#39;,
 &#39;Trial syntheses with a tetracarboxylic biphenyl linker and zinc nitrate gave variable crystallinity. Yields depended on solvent ratio and temperature program. No reliable molecular weight entry was recorded in these notes.&#39;,
 &#39;Multidentate flexible linkers, for example, di, tri, and tetra carboxylates, are the most widely used linkers in MOF chemistry. Such linkers coordinate with metal ions to form a wide range of multinuclear nodes with predictable geometries such as binuclear paddle-wheel units, tri, or tetranuclear units.In this regard, aromatic tetracarboxylate linkers are particularly utilitarian because of the more number of coordinating sites as well as the rich π-electron density. MOFs constructed from such π-electron-rich tetracarboxylate ligands have pore surfaces studded with a large number of oxygen atoms providing better interactions with gas molecules&#39;,
 &quot;PubChem record for Biphenyl-3,3&#39;,5,5&#39;-tetracarboxylic Acid. Synonyms: BPTC acid, Biphenyl-3,3′,5,5′-tetracarboxylic acid. CID: 15840397. Molecular formula: C16H10O8. Molecular weight: 330.24 g/mol. Depositor provided identifiers, SMILES and InChI are available on the page. Data source: PubChem Compound 15840397.&quot;,
 &#39;While long ligands increase pore size, they often reduce structural stability; conversely, short and rigid ligands promote higher crystallinity. Ligand functional groups not only form coordination bonds but also allow post-synthetic modification (PSM) to introduce specific recognition sites (e.g., Lewis acid/base sites, hydrogen-bond donors/acceptors), optimizing performance in gas adsorption, catalysis, or sensing.&#39;,
 &#39;Molar mass is the mass of a given substance divided by the amount of substance. Units are g/mol. For organic compounds, it is calculated from atomic weights of constituent elements. Databases such as PubChem and supplier catalogs often list molar mass directly.&#39;,
 &#39;Received: formic acid, sealed container. Checked against purchase order and stored in cabinet A. &#39;,
 &#39;When checking molecular weight, verify against a reliable chemical database or a certificate of analysis. Cross-check names and synonyms to avoid confusion with isomers or salts. Confirm that the entry refers to the free acid.&#39;]
</pre></div>
</div>
</div>
</div>
<p>Now we turn all text chunks (including our query) into vectors, one by one:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ---------------------------</span>
<span class="c1"># 2) Embeddings with ada</span>
<span class="c1"># ---------------------------</span>

<span class="n">embed_model</span> <span class="o">=</span> <span class="s2">&quot;text-embedding-ada-002&quot;</span>
<span class="n">emb_resp</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">embeddings</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">embed_model</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">emb_inputs</span><span class="p">)</span>

<span class="n">query_vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">emb_resp</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">embedding</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">chunk_vecs</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">embedding</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">emb_resp</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>


<span class="n">query_vec</span><span class="p">,</span> <span class="n">chunk_vecs</span> <span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(array([ 0.00375337,  0.01740051,  0.00285987, ..., -0.01896577,
        -0.03446187, -0.04549698], dtype=float32),
 [array([-0.00187464,  0.00197073,  0.00512828, ...,  0.00813917,
         -0.017627  , -0.03975853], dtype=float32),
  array([-0.02565385,  0.00347046, -0.01290083, ..., -0.00154037,
         -0.0102602 , -0.02367841], dtype=float32),
  array([ 0.01010253,  0.01796005,  0.00264043, ..., -0.00014729,
         -0.02844526, -0.0485993 ], dtype=float32),
  array([ 0.00122443,  0.02322386,  0.00654937, ..., -0.00066688,
         -0.00274825, -0.0173708 ], dtype=float32),
  array([ 0.02014875,  0.01821398, -0.00709828, ..., -0.02044451,
         -0.01693235, -0.02967474], dtype=float32),
  array([ 0.01795577, -0.01040694, -0.01706923, ..., -0.00274232,
         -0.01365539, -0.02199152], dtype=float32),
  array([ 0.01339327,  0.00721676, -0.01453755, ..., -0.00899169,
         -0.00051566, -0.0172032 ], dtype=float32)])
</pre></div>
</div>
</div>
</div>
<p>Now we retrieve top-k by cosine similarity:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ---------------------------</span>
<span class="c1"># 3) Retrieve top-k by cosine similarity</span>
<span class="c1"># ---------------------------</span>

<span class="k">def</span><span class="w"> </span><span class="nf">cosine_similarity</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="n">denom</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="n">denom</span><span class="p">)</span> <span class="k">if</span> <span class="n">denom</span> <span class="k">else</span> <span class="mf">0.0</span>
<span class="n">sims</span> <span class="o">=</span> <span class="p">[</span><span class="n">cosine_similarity</span><span class="p">(</span><span class="n">query_vec</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">chunk_vecs</span><span class="p">]</span>
<span class="n">ranked</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="n">sims</span><span class="p">)),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">top_k</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">top_hits</span> <span class="o">=</span> <span class="n">ranked</span><span class="p">[:</span><span class="n">top_k</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Top matches:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">top_hits</span><span class="p">:</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="n">chunks</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- </span><span class="si">{</span><span class="n">ch</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">  score=</span><span class="si">{</span><span class="n">score</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">  source=</span><span class="si">{</span><span class="n">ch</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Top matches:
- pubchem-15840397  score=0.915  source=https://pubchem.ncbi.nlm.nih.gov/compound/15840397
- inventory-2  score=0.845  source=local database: synthesis notes 2024-10
- wiki-1  score=0.832  source=https://en.wikipedia.org/wiki/Biphenyl
</pre></div>
</div>
</div>
</div>
<p>Now, the top 1 retrived information was provided as a part of input message (so the agent will see <strong>both</strong> user’s question and this piece of information before answering the question):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ---------------------------</span>
<span class="c1"># 4) Build combined prompt from retrieved chunks</span>
<span class="c1"># ---------------------------</span>
<span class="n">context_lines</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">top_hits</span><span class="p">:</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="n">chunks</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
    <span class="n">context_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">ch</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">ch</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">  (source: </span><span class="si">{</span><span class="n">ch</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

<span class="n">context_block</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">context_lines</span><span class="p">)</span>

<span class="n">system_msg</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;You are a careful chemistry assistant. Use only the provided CONTEXT. &quot;</span>
    <span class="s2">&quot;If the molecular weight is present, answer with a single value in g/mol and include the source id in brackets. &quot;</span>
    <span class="s2">&quot;If not found, reply: Not found.&quot;</span>
<span class="p">)</span>

<span class="n">user_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;QUESTION: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">CONTEXT:</span><span class="se">\n</span><span class="si">{</span><span class="n">context_block</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">Return: &lt;value&gt; g/mol [&lt;source-id&gt;]&quot;</span>

<span class="n">combined_messages</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">system_msg</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">user_msg</span><span class="p">},</span>
<span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">---- COMBINED PROMPT (messages) ----&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">combined_messages</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>---- COMBINED PROMPT (messages) ----
[
  {
    &quot;role&quot;: &quot;system&quot;,
    &quot;content&quot;: &quot;You are a careful chemistry assistant. Use only the provided CONTEXT. If the molecular weight is present, answer with a single value in g/mol and include the source id in brackets. If not found, reply: Not found.&quot;
  },
  {
    &quot;role&quot;: &quot;user&quot;,
    &quot;content&quot;: &quot;QUESTION: What is the molecular weight of biphenyl-3,3&#39;,5,5&#39;-tetracarboxylic acid?\n\nCONTEXT:\n[pubchem-15840397] PubChem record for Biphenyl-3,3&#39;,5,5&#39;-tetracarboxylic Acid. Synonyms: BPTC acid, Biphenyl-3,3\u2032,5,5\u2032-tetracarboxylic acid. CID: 15840397. Molecular formula: C16H10O8. Molecular weight: 330.24 g/mol. Depositor provided identifiers, SMILES and InChI are available on the page. Data source: PubChem Compound 15840397.  (source: https://pubchem.ncbi.nlm.nih.gov/compound/15840397)\n\n[inventory-2] Trial syntheses with a tetracarboxylic biphenyl linker and zinc nitrate gave variable crystallinity. Yields depended on solvent ratio and temperature program. No reliable molecular weight entry was recorded in these notes.  (source: local database: synthesis notes 2024-10)\n\n[wiki-1] Biphenyl is an aromatic hydrocarbon composed of two connected benzene rings. Many substituted biphenyls are used in materials and coordination chemistry. Unsubstituted biphenyl has formula C12H10. Substituted variants may carry carboxylate groups that change physical properties and reactivity. Safety data and handling vary by substitution pattern.  (source: https://en.wikipedia.org/wiki/Biphenyl)\n\nReturn: &lt;value&gt; g/mol [&lt;source-id&gt;]&quot;
  }
]
</pre></div>
</div>
</div>
</div>
<p>Below you will see with this “cheating” workflow by providing external information, even <code class="docutils literal notranslate"><span class="pre">gpt-3.5</span></code> can answer this question correctly without “guessing” the answer, thus reducing the halluciations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ---------------------------</span>
<span class="c1"># 5) Ask the model</span>
<span class="c1"># ---------------------------</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">responses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-3.5-turbo&quot;</span><span class="p">,</span>
    <span class="nb">input</span><span class="o">=</span><span class="n">combined_messages</span><span class="p">,</span>
    <span class="n">temperature</span><span class="o">=</span><span class="mi">0</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">---- MODEL ANSWER ----&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">output_text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>---- MODEL ANSWER ----
The molecular weight of biphenyl-3,3&#39;,5,5&#39;-tetracarboxylic acid is 330.24 g/mol. [pubchem-15840397]
</pre></div>
</div>
</div>
</div>
</section>
<section id="glossary">
<h2>5. Glossary<a class="headerlink" href="#glossary" title="Link to this heading">#</a></h2>
<p>Responses API</p>
<blockquote>
<div><p>Interface for sending prompts and getting model outputs programmatically.</p>
</div></blockquote>
<p>Temperature</p>
<blockquote>
<div><p>Randomness knob; higher values produce more varied wording.</p>
</div></blockquote>
<p>Max output tokens</p>
<blockquote>
<div><p>Hard cap on the length of the model’s reply.</p>
</div></blockquote>
<p>System prompt</p>
<blockquote>
<div><p>Global instruction that guides tone and behavior across turns.</p>
</div></blockquote>
<p>Hallucination</p>
<blockquote>
<div><p>Confident but incorrect content produced by a model.</p>
</div></blockquote>
<p>Retrieval-augmented generation (RAG)</p>
<blockquote>
<div><p>Fetch documents first, then answer using them.</p>
</div></blockquote>
<p>Embedding</p>
<blockquote>
<div><p>Numeric vector that represents text meaning for similarity search.</p>
</div></blockquote>
<p>Cosine similarity</p>
<blockquote>
<div><p>Measure of closeness between embeddings to rank relevant text.</p>
</div></blockquote>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="lecture-19.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Lecture 19 - Transformers</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-goals">Learning goals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">0. Setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-available-models">1. Listing available models</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oneround-conversation">2. One‑round conversation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multiturn-conversation">3. Multi‑turn conversation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hallucinations">4. Hallucinations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glossary">5. Glossary</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book Community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>